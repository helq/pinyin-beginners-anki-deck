<div id="root">
  Guess the Tone

  <div id="to-play"></div>
</div>

<script>
  import '../../scripts/persistence'
  import {checkPersistence, getElemsFromChunks, playAudioAndPersistPossibilities} from "../../scripts/common";

  checkPersistence(function main() {
    function getRandom() {
      switch (Math.floor(Math.random() * 4)) {
        case 0:
          return [() => { /*EOL {{tone1}} EOL*/ }, '1st tone'];
        case 1:
          return [() => { /*EOL {{tone2}} EOL*/ }, '2nd tone'];
        case 2:
          return Math.random() < 0.2
            ? [() => { /*EOL {{tone3}} EOL*/ }, '3rd (spoken) tone']
            : [() => {/*EOL {{tone3-trad }} EOL*/ }, '3rd (traditional) tone']
        case 3:
          return [() => { /*EOL {{tone4 }} EOL*/ }, '4th tone'];
      }
    }

    const random = getRandom();

    playAudioAndPersistPossibilities(getElemsFromChunks(random[0]))

    const tone = random[1];
    Persistence.setItem('tone', tone);
  })
</script>
